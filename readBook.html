<% if(qp.pageNum > 410 || qp.pageNum < 1){ %>
    The book has no remaining pages.
    <div class="nav">
        <ul class="navlist">
            <li>
                <a href="#<%- last.url %>">Go back.</a>
            </li>
        </ul>
    </div>
<% } else { %>
    <p style="max-width:500px;font-size:12px">
    <%
    var parsedPageNum, content;
    if(!("pageNum" in qp)){
        parsedPageNum = 1;
        window.pages = [];
    } else {
        parsedPageNum = parseInt(qp.pageNum, 10);
    }
    if(!window.pages[parsedPageNum]){
        /* Print a page from a book in the library of babel */
        content = '';
        for(var i = 0; i < 40; i++) {
            for(var j = 0; j < 83; j++) {
                /* TODO: Find a more mysterious way to generate numbers */
                var char = String.fromCharCode(97 + Math.floor(Math.random() * 25));
                if(char === 'q'){
                    char = '&nbsp;';
                }
                if(char === 'x'){
                    char = ',';
                }
                if(char === 'w'){
                    char = '.';
                }
                content += char;
            }
            content += '<br />';
        }
        window.pages[parsedPageNum] = content;
    }

    print(window.pages[parsedPageNum]);
    %>
    </p>
    <div class="nav">
        <ul class="navlist">
            <li><a href="#readBook.html?pageNum=<%- (parsedPageNum + 1) %>">
            Read the next page.
            </a></li>
            <li><a href="#readBook.html?pageNum=<%- (parsedPageNum - 1) %>">
            Read the previous page.
            </a></li>
            <li><a href="#bookshelves.html?justRead=true">Stop reading.</a></li>
        </ul>
    </div>
<% } %>